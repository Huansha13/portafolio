<div class="proyectos-container">
<div class="proyectos-header" appScrollAnimate>
  <div class="section-title">
    <span class="section-label">{{ 'projects.label' | translate }}</span>
    <h2 class="section-heading font-display">{{ 'projects.title' | translate }}</h2>
  </div>
  <div class="tabs-custom">
    <button
      class="tab-btn"
      [class.active]="activeItem.id === '1'"
      (click)="onTabChange(items[0])">
      <i class="pi pi-table"></i>
      <span>{{ 'projects.tabs.projects' | translate }}</span>
    </button>
    <button
      class="tab-btn"
      [class.active]="activeItem.id === '2'"
      (click)="onTabChange(items[1])">
      <i class="pi pi-github"></i>
      <span>{{ 'projects.tabs.github' | translate }}</span>
    </button>
  </div>
</div>

<div class="mt-3">
  <div [hidden]="activeItem.id !== '1'">
    <ng-container *ngTemplateOutlet="MisProyectos"></ng-container>
  </div>
  <app-git-hub *ngIf="activeItem.id === '2'" [isVistaBody]="true"></app-git-hub>
</div>

<ng-template #MisProyectos>
  <div>
    @if (spinnerProyectos) {
      <div class="proyectos-bento">
        @for (item of [1, 2, 3]; track item; let idx = $index) {
          <div class="proyecto-bento-card" [class.reverse]="idx % 2 === 1">
            <div class="proyecto-preview">
              <p-skeleton width="100%" height="400px" borderRadius="16px"></p-skeleton>
            </div>
            <div class="proyecto-content">
              <p-skeleton width="30%" height="0.875rem" styleClass="mb-3"></p-skeleton>
              <p-skeleton width="70%" height="2.5rem" styleClass="mb-3"></p-skeleton>
              <p-skeleton width="100%" height="1rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="80%" height="1rem" styleClass="mb-3"></p-skeleton>
              <div class="proyecto-tech">
                <p-skeleton width="80px" height="1.5rem" borderRadius="6px"></p-skeleton>
                <p-skeleton width="80px" height="1.5rem" borderRadius="6px"></p-skeleton>
                <p-skeleton width="80px" height="1.5rem" borderRadius="6px"></p-skeleton>
              </div>
              <div class="proyecto-links">
                <p-skeleton width="44px" height="44px" borderRadius="12px"></p-skeleton>
                <p-skeleton width="44px" height="44px" borderRadius="12px"></p-skeleton>
              </div>
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="proyectos-bento">
        @for (i of proyectosDestacados; track i; let idx = $index) {
          <div class="proyecto-bento-card" [class.reverse]="idx % 2 === 1" appScrollAnimate>
            <div class="proyecto-preview">
              <img [src]="i.url_portada" [alt]="i.nombre" (error)="$event.target.src='https://via.placeholder.com/800x400?text=Project+Image'" />
            </div>
            <div class="proyecto-content">
              <p class="proyecto-label">{{ i.version }}</p>
              <h3 class="proyecto-name">{{ i.nombre }}</h3>
              <p class="proyecto-description">{{ i.descripcion || ('projects.defaultDescription' | translate) }}</p>
              <div class="proyecto-tech">
                @for (tech of i.tecnologias; track tech) {
                  <span class="tech-tag">{{ tech }}</span>
                }
              </div>
              <div class="proyecto-links">
                @if (i.link_github) {
                  <button (click)="openLink(i.link_github)" class="btn-icon">
                    <i class="pi pi-github"></i>
                  </button>
                }
                @if (i.link_demo) {
                  <button (click)="openLink(i.link_demo)" class="btn-icon">
                    <i class="pi pi-external-link"></i>
                  </button>
                }
              </div>
            </div>
          </div>
        }
      </div>

      @if (proyectos.length > 3 && !mostrarTodos) {
        <div class="text-center mt-8">
          <p-button
            (onClick)="verTodosProyectos()"
            [label]="'projects.viewAll' | translate"
            icon="pi pi-arrow-right"
            iconPos="right"
            [outlined]="true"
            severity="secondary"
            styleClass="w-full md:w-auto">
          </p-button>
        </div>
      }
    }
  </div>
</ng-template>
</div>
