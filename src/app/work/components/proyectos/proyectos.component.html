<div class="proyectos-container">
<div class="proyectos-header">
  <div class="section-title">
    <span class="section-label">Portfolio</span>
    <h2 class="section-heading font-display">Proyectos</h2>
  </div>
  <div class="tabs-custom">
    <button 
      class="tab-btn" 
      [class.active]="activeItem.id === '1'"
      (click)="onTabChange(items[0])">
      <i class="pi pi-table"></i>
      <span>Proyectos</span>
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeItem.id === '2'"
      (click)="onTabChange(items[1])">
      <i class="pi pi-github"></i>
      <span>GitHub</span>
    </button>
  </div>
</div>

<div class="mt-3">
  <div [hidden]="activeItem.id !== '1'">
    <ng-container *ngTemplateOutlet="MisProyectos"></ng-container>
  </div>
  <app-git-hub [hidden]="activeItem.id !== '2'" [isVistaBody]="true"></app-git-hub>
</div>

<ng-template #MisProyectos>
  <div>
    @if (spinnerProyectos) {
      <div class="flex align-items-center gap-2">
        <i class="pi pi-spin pi-spinner-dotted"></i> Cargando proyectos
      </div>
    } @else {
      <div class="proyectos-bento">
        @for (i of proyectosDestacados; track i; let idx = $index) {
          <div class="proyecto-bento-card" [class.reverse]="idx % 2 === 1">
            <div class="proyecto-preview">
              <img [src]="i.url_portada" [alt]="i.nombre" />
            </div>
            <div class="proyecto-content">
              <p class="proyecto-label">{{ i.version }}</p>
              <h3 class="proyecto-name">{{ i.nombre }}</h3>
              <p class="proyecto-description">{{ i.descripcion || 'Proyecto desarrollado con las últimas tecnologías' }}</p>
              <div class="proyecto-tech">
                <span class="tech-tag">Angular</span>
                <span class="tech-tag">OpenAI API</span>
                <span class="tech-tag">Tailwind</span>
              </div>
              <div class="proyecto-links">
                @if (i.link_github) {
                  <button (click)="openLink(i.link_github)" class="btn-icon">
                    <i class="pi pi-github"></i>
                  </button>
                }
                @if (i.link_demo) {
                  <button (click)="openLink(i.link_demo)" class="btn-icon">
                    <i class="pi pi-external-link"></i>
                  </button>
                }
              </div>
            </div>
          </div>
        }
      </div>
      
      @if (proyectos.length > 3 && !mostrarTodos) {
        <div class="text-center mt-8">
          <button class="btn-ver-todos" (click)="verTodosProyectos()">
            Ver todos los proyectos <i class="pi pi-arrow-right ml-2"></i>
          </button>
        </div>
      }
    }
  </div>
</ng-template>
</div>
